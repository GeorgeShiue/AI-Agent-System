# ğŸ¬ FilmSeeker v3

**FilmSeeker v3** æ˜¯ä¸€å€‹åŸºæ–¼ [LangGraph](https://github.com/langchain-ai/langgraph)ã€[LangChain](https://www.langchain.com/)ã€IMDb è³‡æ–™èˆ‡å·¥å…·éˆæ§‹å»ºçš„æ™ºèƒ½é›»å½±æœå°‹èˆ‡æ¨ç†ä»£ç†ç³»çµ±ã€‚å®ƒèƒ½ç†è§£è‡ªç„¶èªè¨€è¼¸å…¥ï¼Œè‡ªå‹•è¦åŠƒã€åŸ·è¡Œä¸¦å›æ‡‰èˆ‡é›»å½±ç›¸é—œçš„å•é¡Œï¼ˆå¦‚æ‰¾å‡ºç‰¹å®šæ¼”å“¡çš„é›»å½±ã€æ ¹æ“šæè¿°æ‰¾ç‰‡åã€æŸ¥è©¢åŠ‡æƒ…ã€æ¼”å“¡ã€å°æ¼”ã€ç¥¨æˆ¿ç­‰ï¼‰ã€‚

---

## ğŸš€ å®‰è£èˆ‡é‹è¡Œ

### 1ï¸âƒ£ ç’°å¢ƒéœ€æ±‚

* Python 3.8+
* **Google Chrome** ç€è¦½å™¨
* **ChromeDriver** (è«‹ä¸‹è¼‰å°æ‡‰æ‚¨ Chrome ç‰ˆæœ¬çš„é§•å‹•ç¨‹å¼)

### 2ï¸âƒ£ å‰µå»ºç’°å¢ƒ&å®‰è£å¥—ä»¶

```bash
conda create --name filmseeker python=3.10
conda activate filmseeker
pip install -r requirements.txt
```

### 3ï¸âƒ£ è¨­ç½® API Key

å°‡æ‚¨çš„ OpenAI API Key è¨­å®šåœ¨ **.env** æ–‡ä»¶ä¸­ï¼š

```
API_KEY=your_openai_api_key
```

---

## ğŸ”¹ ä½¿ç”¨æ–¹å¼

### 1. å•Ÿå‹•ç³»çµ±

åŸ·è¡Œ `FilmSeeker_v3.py`ï¼š

```bash
python FilmSeeker_v3.py
```

### 2. è¼¸å…¥æŸ¥è©¢

ç³»çµ±æœƒè«‹ä½ è¼¸å…¥ä¸€å€‹é›»å½±ç›¸é—œçš„å•é¡Œï¼Œä¾‹å¦‚ï¼š

```
Please enter your query (or type 'exit' to quit): I am looking for a movie starring Keanu Reeves and the movie is about virtual reality.
```

### 3. ç³»çµ±åŸ·è¡Œæµç¨‹

* **Plan Lookup**ï¼šé¦–å…ˆåœ¨ vectorstore ä¸­æœå°‹æ˜¯å¦å·²æœ‰ç›¸ä¼¼è¼¸å…¥çš„éå» plan
* **Planner**ï¼šå¦‚æœç„¡ç›¸é—œè¨˜éŒ„ï¼Œå‰‡é‡æ–°ç”Ÿæˆè§£æ±ºæ­¥é©Ÿ
* **Executor**ï¼šåŸ·è¡Œ plan ä¸­çš„å·¥ä½œï¼Œé‡‡ç”¨ IMDb å·¥å…·
* **Replanner**ï¼šå¦‚æœçµæœä¸åˆç†æˆ–å‡ºç¾éŒ¯èª¤ï¼Œå°‡é‡æ–°è¦åŠƒ plan
* **Final Response**ï¼šå±•ç¤ºæœ€çµ‚çš„çµæœ

---

## ğŸ“š åŠŸèƒ½æ¦‚è¿°

1. **Query Processing**ï¼šåˆ†æä½¿ç”¨è€…çš„è¼¸å…¥ï¼Œè½‰æ›ç‚º plan å¯åŸ·è¡Œçš„å†…å®¹
2. **Plan Generation**ï¼šä½¿ç”¨ planner agent è£½ä½œå¤šæ­¥é©Ÿä»¶æº–å‚™è™•ç†
3. **Execute Plan**ï¼šé€é executor agent åŸ·è¡Œæ‰€å»ºè¨­çš„è§£æ±ºæ­¥é©Ÿï¼Œå¸¶å‡º IMDb è³‡æ–™
4. **Replan When Needed**ï¼šç•¶çµæœä¸åˆç†æ™‚ï¼Œä½¿ç”¨ replanner é‡æ–°è¨ˆç•«
5. **Plan Memory**ï¼šå°‡ä½¿ç”¨è€…è¼¸å…¥èˆ‡ plan å„²å­˜åœ¨å‘é‡è³‡æ–™åº«ï¼Œä¾›ä¸‹æ¬¡é¡ä¼¼å•é¡Œæ“æœ‰è¨˜æ†¶

---

## ğŸ“‚ è¨ˆç•«çµ„æˆ

```
FilmSeeker_v3/
â”œâ”€â”€ FilmSeeker_v3.py       ï¼»ä¸»åŸ·è¡Œç¨‹å¼ï¼Œå•Ÿå‹•ä¸»ç³»çµ±ï¼½
â”œâ”€â”€ agents.py              ï¼»è¨ˆç•«ã€åŸ·è¡Œã€é‡æ–°è¨ˆç•«çš„ä»£ç†è¨­è¨ˆï¼½
â”œâ”€â”€ graph.py               ï¼»ä½¿ç”¨ LangGraph å®šç¾©çš„ç³»çµ±æµç¨‹ï¼½
â”œâ”€â”€ tools.py               ï¼»èˆ‡ IMDb äº’å‹•çš„å·¥å…·ï¼ŒåŸ·è¡Œæœå°‹/è§£æï¼½
â”œâ”€â”€ movie_infos_db/        ï¼»å„²å­˜é›»å½±è³‡æ–™çš„å‘é‡ DBï¼½
â””â”€â”€ plan_documents_db/     ï¼»å„²å­˜éå»è¨ˆç•«è³‡æ–™çš„å‘é‡ DBï¼½
```

---

## ğŸ”§ IMDB å·¥å…· (ä½æ–¼ `tools.py`)

| å·¥å…·åç¨±                    | åŠŸèƒ½æè¿°                            |
| ----------------------- | ------------------------------- |
| `movie_name_generate`   | æ ¹æ“šç”¨æˆ¶è¼¸å…¥æ¨æ¸¬é›»å½±åç¨±ï¼ˆå‘é‡æœå°‹ï¼‰              |
| `movie_infos_search`    | ä½¿ç”¨ Selenium æœå°‹ IMDb ä¸¦å–å¾—é›»å½±ç¶²é ç¸½è¦½è³‡æ–™ |
| `movie_metadata_search` | æ“æœ‰ IMDb é€£çµå¾Œï¼Œé‡é»æå–å°æ¼”ã€åŠ‡æœ¬ã€ç¥¨æˆ¿ã€è©•åˆ†ç­‰è³‡æ–™  |